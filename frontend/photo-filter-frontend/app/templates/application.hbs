{{! frontend/photo-filter-frontend/app/templates/application.hbs }}
{{page-title "Photo Filter"}}

{{! Bind to services so the template updates reactively }}
{{this.currentAlbum}}
{{this.reload}}

<div class="flex flex-col h-screen">
  {{! ╭────────────────── Top Nav Bar ──────────────────╮ }}
  <nav
    class="flex items-center justify-between h-16 px-4 bg-base-300 shadow-md"
  >
    <h1 class="text-lg font-semibold">
      <LinkTo @route="index" class="hover:underline">Photo&nbsp;Filter</LinkTo>
    </h1>

    {{#if this.reload.hasStale}}
      <button
        type="button"
        class="badge badge-primary cursor-pointer select-none"
        {{on "click" this.reload.refreshAll}}
      >
        Library&nbsp;updated
      </button>
    {{/if}}
  </nav>
  {{! ╰───────────────────────────────────────────────╯ }}

  <div class="flex flex-1 overflow-hidden">
    {{! ╭──────── Sidebar: Albums (+ future nav) ───────╮ }}
    <aside class="w-64 overflow-y-auto bg-base-200 border-r border-base-300">

      {{! Albums list }}
      <section class="p-4">
        <h2 class="mb-2 text-sm font-semibold uppercase opacity-70">Albums</h2>

        <ul class="space-y-1">
          {{#each this.albums as |album|}}
            <li>
              <LinkTo
                @route="albums.album"
                @model={{album}}
                class="block px-2 py-1 rounded hover:bg-base-100
                  {{if (eq this.currentAlbum album) 'font-semibold'}}"
              >
                {{album.title}}
              </LinkTo>
            </li>
          {{/each}}
        </ul>
      </section>

      {{! (Time taxonomy / people filters will render here in the future) }}
    </aside>
    {{! ╰──────────────────────────────────────────────╯ }}

    {{! Main outlet }}
    <main class="flex-1 overflow-auto">
      {{outlet}}
    </main>
  </div>
</div>